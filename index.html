<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JimmyPla6z | GitHub Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: system-ui, sans-serif; margin: 0; background: #f8f9fa; color: #222; }
    header { background: #24292e; color: #fff; padding: 2rem 1rem 1rem 1rem; text-align: center; }
    main { max-width: 900px; margin: 2rem auto; background: #fff; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 12px #0001; }
    h1, h2 { margin-top: 0; }
    nav { background: #fff; border-bottom: 1px solid #e1e4e8; }
    nav ul { display: flex; justify-content: center; list-style: none; margin: 0; padding: 0; }
    nav li { margin: 0 1.5rem; }
    nav a { color: #0366d6; text-decoration: none; font-weight: 500; font-size: 1.05em; padding: 1rem 0; display: block; position: relative; }
    nav a.active, nav a:hover { color: #24292e; }
    nav a.active:after, nav a:hover:after {
      content: "";
      display: block;
      margin: 0 auto;
      width: 60%;
      border-bottom: 2px solid #24292e;
      padding-bottom: 2px;
      margin-bottom: -2px;
    }
    section { display: none; }
    section.active { display: block; }
    .profile-info { display: flex; align-items: center; gap: 2rem; margin-bottom: 2rem; }
    .profile-info img { border-radius: 50%; width: 120px; height: 120px; border: 3px solid #eee; background: #fff; }
    .profile-meta { flex: 1; min-width: 0; }
    .repo-list, .star-list, .event-list { list-style: none; padding: 0; margin: 0; }
    .repo-list li, .star-list li, .event-list li { padding: 1rem 0; border-bottom: 1px solid #eee; }
    .repo-list li:last-child, .star-list li:last-child, .event-list li:last-child { border-bottom: none; }
    .repo-name, .star-name { font-weight: bold; font-size: 1.07em; }
    .repo-desc, .star-desc { color: #555; margin-top: 0.2em; }
    .repo-meta, .star-meta, .event-meta { font-size: 0.92em; color: #888; }
    .event-type { font-weight: 500; }
    .contact-form label { display: block; margin: 0.7em 0 0.2em 0; }
    .contact-form input[type="text"],
    .contact-form input[type="email"],
    .contact-form textarea { width: 100%; padding: 0.4em; border: 1px solid #bbb; border-radius: 4px; }
    .contact-form textarea { min-height: 70px; }
    .contact-form button { margin-top: 1em; padding: 0.6em 2em; font-size: 1em; background: #24292e; color: #fff; border: none; border-radius: 4px; cursor: pointer; }
    .contact-form button:hover { background: #444; }
    .contact-form .checkbox-inline { display: inline-block; margin-left: 0.5em; font-weight: normal; }
    .contact-form .required { color: #d00; }
    .contact-form .form-result { margin-top: 1em; }
    @media (max-width: 700px) {
      main { padding: 1rem; }
      .profile-info { flex-direction: column; gap: 1rem; text-align: center; }
      nav ul { flex-direction: column; }
      nav li { margin: 0.5rem 0; }
    }
  </style>
</head>
<body>
  <header>
    <h1>JimmyPla6z</h1>
    <p>My GitHub public profile, repositories, stars, activity, and contact</p>
  </header>
  <nav>
    <ul>
      <li><a href="#profile" id="nav-profile" class="active">Profile</a></li>
      <li><a href="#repositories" id="nav-repositories">Repositories</a></li>
      <li><a href="#stars" id="nav-stars">Stars</a></li>
      <li><a href="#activity" id="nav-activity">Activity</a></li>
      <li><a href="#contact" id="nav-contact">Contact</a></li>
    </ul>
  </nav>
  <main>
    <section id="profile" class="active">
      <h2>Profile</h2>
      <div class="profile-info" id="profile-info">
        Loading profile...
      </div>
    </section>
    <section id="repositories">
      <h2>Repositories</h2>
      <ul class="repo-list" id="repo-list">
        <li>Loading repositories…</li>
      </ul>
    </section>
    <section id="stars">
      <h2>Starred Repositories</h2>
      <ul class="star-list" id="star-list">
        <li>Loading starred repositories…</li>
      </ul>
    </section>
    <section id="activity">
      <h2>Recent Public Activity</h2>
      <ul class="event-list" id="event-list">
        <li>Loading activity…</li>
      </ul>
    </section>
    <section id="contact">
      <h2>Contact Me</h2>
      <form
        class="contact-form"
        id="contact-form"
        action="https://formspree.io/f/xanjygkg"
        method="POST"
        enctype="multipart/form-data"
        autocomplete="off"
        novalidate
      >
        <label>
          First Name:
          <input type="text" name="first_name" id="first_name">
          <span class="checkbox-inline">
            <input type="checkbox" id="anon_first" name="anon_first">
            I'd prefer not to say
          </span>
        </label>
        <label>
          Last Name:
          <input type="text" name="last_name" id="last_name">
          <span class="checkbox-inline">
            <input type="checkbox" id="anon_last" name="anon_last">
            I'd prefer not to say
          </span>
        </label>
        <label>
          Email: <span class="required">*</span>
          <input type="email" name="email" id="email" required>
        </label>
        <label>
          Username/Company Name: <span class="required">*</span>
          <input type="text" name="user_company" id="user_company" required>
        </label>
        <label>
          Inquiry Details: <span class="required">*</span>
          <input type="text" name="inquiry" id="inquiry" required>
        </label>
        <label>
          Message: <span class="required">*</span>
          <textarea name="message" id="message" required></textarea>
        </label>
        <label>
          File Attachment:
          <input type="file" name="attachment" id="attachment">
        </label>
        <button type="submit">Send</button>
        <div class="form-result" id="form-result" style="color:#d00;"></div>
      </form>
    </section>
    <section id="thankyou">
      <h2>Thank You!</h2>
      <p>Your message has been sent. I appreciate your inquiry!</p>
    </section>
  </main>
  <footer style="text-align:center; color:#aaa; margin-top:2em; font-size:0.9em;">
    &copy; 2025 JimmyPla6z
  </footer>
  <script>
    // Navigation logic
    function showSection(sectionId) {
      document.querySelectorAll('section').forEach(
        sec => sec.classList.remove('active')
      );
      if (document.getElementById(sectionId))
        document.getElementById(sectionId).classList.add('active');
      document.querySelectorAll('nav a').forEach(
        a => a.classList.remove('active')
      );
      if (document.getElementById('nav-' + sectionId))
        document.getElementById('nav-' + sectionId).classList.add('active');
    }
    document.querySelectorAll('nav a').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        const section = a.getAttribute('href').substring(1);
        history.replaceState(null, '', '#' + section);
        showSection(section);
      });
    });
    window.addEventListener('hashchange', () => {
      const section = location.hash.substring(1) || 'profile';
      if (document.getElementById(section)) showSection(section);
    });
    window.addEventListener('DOMContentLoaded', () => {
      const section = location.hash.substring(1) || 'profile';
      if (document.getElementById(section)) showSection(section);
    });

    // Fetch profile info
    fetch('https://api.github.com/users/JimmyPla6z')
      .then(resp => resp.json())
      .then(user => {
        document.getElementById('profile-info').innerHTML = `
          <img src="${user.avatar_url}" alt="avatar">
          <div class="profile-meta">
            <div style="font-size:1.2em; font-weight:bold;">${user.name || user.login}</div>
            <div>@${user.login}</div>
            ${user.bio ? `<div style="margin-top:0.5em;">${user.bio}</div>` : ''}
            <div style="margin-top:0.5em;">
              <b>Followers:</b> ${user.followers} &nbsp; • &nbsp; <b>Following:</b> ${user.following} <br>
              <b>Public Repos:</b> ${user.public_repos} &nbsp; • &nbsp; <b>Public Gists:</b> ${user.public_gists}
            </div>
            ${user.location ? `<div style="margin-top:0.5em;"><b>Location:</b> ${user.location}</div>` : ''}
            ${user.email ? `<div style="margin-top:0.5em;"><b>Email:</b> <a href="mailto:${user.email}">${user.email}</a></div>` : ''}
          </div>
        `;
      })
      .catch(() => {
        document.getElementById('profile-info').innerHTML = "Error loading profile.";
      });

    // Fetch repositories
    fetch('https://api.github.com/users/JimmyPla6z/repos?per_page=100&sort=updated')
      .then(resp => resp.json())
      .then(repos => {
        const list = document.getElementById('repo-list');
        list.innerHTML = '';
        if (!repos.length) {
          list.innerHTML = '<li>No public repositories found.</li>';
          return;
        }
        repos.sort((a,b) => b.stargazers_count - a.stargazers_count);
        repos.forEach(repo => {
          const li = document.createElement('li');
          li.innerHTML = `
            <div class="repo-name">
              <a href="${repo.html_url}" target="_blank">${repo.name}</a>
            </div>
            ${repo.description ? `<div class="repo-desc">${repo.description}</div>` : ''}
            <div class="repo-meta">
              ★ ${repo.stargazers_count} &nbsp; • &nbsp; ${repo.language || 'Unknown'}
              ${repo.fork ? '&nbsp; • &nbsp; Forked' : ''}
              &nbsp; • &nbsp; Updated: ${new Date(repo.updated_at).toLocaleDateString()}
            </div>
          `;
          list.appendChild(li);
        });
      })
      .catch(() => {
        document.getElementById('repo-list').innerHTML = '<li>Error loading repositories.</li>';
      });

    // Fetch starred repositories
    fetch('https://api.github.com/users/JimmyPla6z/starred?per_page=100')
      .then(resp => resp.json())
      .then(stars => {
        const list = document.getElementById('star-list');
        list.innerHTML = '';
        if (!stars.length) {
          list.innerHTML = '<li>No starred repositories found.</li>';
          return;
        }
        stars.forEach(repo => {
          const li = document.createElement('li');
          li.innerHTML = `
            <div class="star-name">
              <a href="${repo.html_url}" target="_blank">${repo.full_name}</a>
            </div>
            ${repo.description ? `<div class="star-desc">${repo.description}</div>` : ''}
            <div class="star-meta">
              ★ ${repo.stargazers_count} &nbsp; • &nbsp; ${repo.language || 'Unknown'}
              &nbsp; • &nbsp; Owner: ${repo.owner.login}
            </div>
          `;
          list.appendChild(li);
        });
      })
      .catch(() => {
        document.getElementById('star-list').innerHTML = '<li>Error loading starred repositories.</li>';
      });

    // Fetch recent public activity
    fetch('https://api.github.com/users/JimmyPla6z/events/public?per_page=30')
      .then(resp => resp.json())
      .then(events => {
        const list = document.getElementById('event-list');
        list.innerHTML = '';
        if (!Array.isArray(events) || !events.length) {
          list.innerHTML = '<li>No recent public activity found.</li>';
          return;
        }
        events.forEach(ev => {
          let desc = '';
          if (ev.type === "PushEvent") {
            desc = `Pushed to <b>${ev.repo.name}</b>: ${ev.payload.commits.map(c=>c.message).join('; ')}`;
          } else if (ev.type === "CreateEvent") {
            desc = `Created ${ev.payload.ref_type} <b>${ev.payload.ref || ev.repo.name}</b> in <b>${ev.repo.name}</b>`;
          } else if (ev.type === "IssuesEvent") {
            desc = `${ev.payload.action} issue <b>#${ev.payload.issue.number}</b> in <b>${ev.repo.name}</b>: ${ev.payload.issue.title}`;
          } else if (ev.type === "PullRequestEvent") {
            desc = `${ev.payload.action} pull request <b>#${ev.payload.pull_request.number}</b> in <b>${ev.repo.name}</b>: ${ev.payload.pull_request.title}`;
          } else if (ev.type === "ForkEvent") {
            desc = `Forked <b>${ev.repo.name}</b>`;
          } else if (ev.type === "WatchEvent") {
            desc = `Starred <b>${ev.repo.name}</b>`;
          } else if (ev.type === "ReleaseEvent") {
            desc = `${ev.payload.action} release <b>${ev.payload.release.tag_name}</b> in <b>${ev.repo.name}</b>`;
          } else {
            desc = `${ev.type.replace(/Event$/, '')} in <b>${ev.repo.name}</b>`;
          }
          const li = document.createElement('li');
          li.innerHTML = `
            <span class="event-type">${desc}</span>
            <span class="event-meta"><br>${new Date(ev.created_at).toLocaleString()}</span>
          `;
          list.appendChild(li);
        });
      })
      .catch(() => {
        document.getElementById('event-list').innerHTML = '<li>Error loading activity.</li>';
      });

    // Contact form validation and custom submit handling
    document.getElementById('contact-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      let valid = true;
      let firstName = document.getElementById('first_name').value.trim();
      let lastName = document.getElementById('last_name').value.trim();
      let anonFirst = document.getElementById('anon_first').checked;
      let anonLast = document.getElementById('anon_last').checked;
      let email = document.getElementById('email').value.trim();
      let userCompany = document.getElementById('user_company').value.trim();
      let inquiry = document.getElementById('inquiry').value.trim();
      let message = document.getElementById('message').value.trim();

      // Validation logic
      if (!anonFirst && firstName === "") valid = false;
      if (!anonLast && lastName === "") valid = false;
      if (email === "" || userCompany === "" || inquiry === "" || message === "") valid = false;

      if (!valid) {
        document.getElementById('form-result').innerText = "Please fill out all required fields or check 'I'd prefer not to say' for names.";
        return;
      }

      // If "I'd prefer not to say" is checked, replace with "Not Applicated"
      if (anonFirst) {
        document.getElementById('first_name').value = "Not Applicated";
      }
      if (anonLast) {
        document.getElementById('last_name').value = "Not Applicated";
      }

      // Prepare data for Formspree
      const form = e.target;
      const data = new FormData(form);

      // Send via fetch
      try {
        const response = await fetch(form.action, {
          method: 'POST',
          body: data,
          headers: { 'Accept': 'application/json' }
        });
        if (response.ok) {
          window.location.hash = "#thankyou";
          showSection('thankyou');
        } else {
          document.getElementById('form-result').innerText = "There was an error. Please try again.";
        }
      } catch (error) {
        document.getElementById('form-result').innerText = "There was an error. Please try again.";
      }
    });
  </script>
</body>
</html>
